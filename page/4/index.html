<!doctype html><html><head><meta name=generator content="Hugo 0.111.3"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Tachunn Publication | Home</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content><meta property="og:image" content><link rel=alternate type=application/rss+xml href=https://tachunwu.github.io/index.xml title="Tachunn Publication"><meta property="og:title" content="Tachunn Publication"><meta property="og:description" content><meta property="og:type" content="website"><meta property="og:url" content="https://tachunwu.github.io/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Tachunn Publication"><meta name=twitter:description content><script src=https://tachunwu.github.io/js/feather.min.js></script>
<link href=https://tachunwu.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://tachunwu.github.io/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css></head><body><div class=content><header><script async src="https://www.googletagmanager.com/gtag/js?id=G-2LYZQ778V0"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-2LYZQ778V0")</script><div class=main><a href=https://tachunwu.github.io/>Tachunn Publication</a></div><nav><a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/about>About</a>
<a href=/tags>Tags</a></nav></header><main class=list><div class=site-description></div><section class=list-item><h1 class=title><a href=/posts/discord-fulltext/>&lt;Discord å¦‚ä½• Full-text Index æ•¸åå„„çš„è¨Šæ¯></a></h1><time>Jan 30, 2023</time><br><div class=description>Index å‰è¨€ éœ€æ±‚ è§£æ±ºæ–¹æ¡ˆ Question 1ï¼šæˆ‘è©²ç”¨å¤–éƒ¨çš„ SaaS å»è§£æ±ºé€™å€‹å•é¡Œå—ï¼Ÿ Question 2ï¼šæœ‰ Open-source çš„æ–¹æ¡ˆå¯ä»¥ç”¨å—ï¼Ÿ æˆ‘å€‘è©²â€å…¨é¢â€ç›¸ä¿¡ Elasticsearch å—ï¼Ÿ å…ƒä»¶çš„ç´°ç¯€ é«˜å±¤æ¬¡åˆ†æ Insert å…ƒä»¶ Shard Manage å…ƒä»¶ Indexing & Mapping the Data å¯¦éš›ä¸Š Coding çš„å¯¦ä½œ å¯¦éš›åœ¨ Production çš„éç¨‹ åˆå§‹åŒ–å¯¦é©— ç ”ç©¶çš„ç²¾ç¥ æ›´æ–°çš„ç…©æƒ± The Future Exampleï¼šUnhealthy Cluster (ran out of heap) Exampleï¼šHealthy Cluster çµè«– æ„Ÿæƒ³ å‰è¨€ é€™ç¯‡éƒ¨è½æ ¼æœƒç¿»è­¯å’Œåƒè€ƒ &lt;How discord indexes billions of messages> é€™ç¯‡æ–‡ç« çš„å…§å®¹åšæ•´ç†å’Œç¿»è­¯ã€‚
é€™ç¯‡ç®—æ˜¯ &lt;Discord å¦‚ä½•è™•ç†æ•¸åå„„çš„è¨Šæ¯> çš„ä¸‹é›†ï¼Œç•¶æœ‰äº†æœ€æ ¸å¿ƒçš„è¨Šæ¯è®€å¯«ç³»çµ±ã€‚ä¸‹ä¸€å€‹å¾ˆé‡è¦çš„ feature å°±æ˜¯ Full-text Searchã€‚
èˆ‰ä¾‹ä¾†èªªï¼ŒUser çªç„¶æƒ³åˆ°ä»¥å‰å’ŒåŒä¼´è¨è«–çš„æŸå€‹è­°é¡Œï¼Œä¸å¯èƒ½æ…¢æ…¢æ»‘å»æ‰¾ï¼Œè€Œæ˜¯è¦ç”¨åƒæ˜¯ Search Engine é€™æ¨£çš„åŠŸèƒ½ï¼Œé€™ç¯‡æ–‡ç« å°±æ˜¯åœ¨ä»‹ç´¹ Discord å¦‚ä½•åšåˆ°é€™ç¨®åŠŸèƒ½ã€‚&mldr;</div><a class=readmore href=/posts/discord-fulltext/>Read more âŸ¶</a></section><section class=list-item><h1 class=title><a href=/posts/cassandra/>&lt;Cassandra-based çš„è¨­è¨ˆæ¨¡å‹ï¼šChebotko Diagrams></a></h1><time>Jan 27, 2023</time><br><div class=description>Index å‰è¨€ å…ˆå‚™çŸ¥è­˜ ç›®æ¨™ Cassandraâ€™s Data Model Keyspace Table Table Exampleï¼šsingle-row partitions Table Exampleï¼šmulti-row partitions Query Model Conceptual Data & Application Workflow Modeling å¯¦éš›æ¡ˆä¾‹ Logical Data Modeling Data Modeling Principles Mapping Rules Chebotko Diagrams Notation Logical Chebotko Diagram Physical Chebotko Diagram æ³¨æ„äº‹é … çµè«– å‰è¨€ é€™ç¯‡æ–‡ç« æœƒç¿»è­¯å’Œæ•´ç†ä¸€ç¯‡è«–æ–‡ &lt;A Big Data Modeling Methodology for Apache Cassandra>ï¼Œé€™ç¯‡è«–æ–‡æ˜¯ç”±ç¶­è­· Apache Cassandra å•†ç”¨ç‰ˆ DataStax çš„å·¥ç¨‹å¸«æ‰€å¯«çš„è«–æ–‡ (ç™¼è¡¨åœ¨ 2015 IEEE BigDataCongress ä¸Š)ã€‚
æˆ‘å€‹äººèªç‚ºéå¸¸é©åˆåšç‚ºå­¸ç¿’ Cassandra é€™ç¨®ç³»çµ±çš„åŸºçŸ³ (å¦‚æœæœ‰ç¶“é©—ä¸€é»çš„è®€è€…æœƒç™¼ç¾ Google BigTable å’Œ AWS çš„ DynamoDB éƒ½å¯ä»¥é©ç”¨æœ¬è«–æ–‡çš„æ¦‚å¿µ)ã€‚&mldr;</div><a class=readmore href=/posts/cassandra/>Read more âŸ¶</a></section><section class=list-item><h1 class=title><a href=/posts/discord-cassandra/>&lt;Discord å¦‚ä½•è™•ç†ä¸€å¤©æ•¸å„„çš„è¨Šæ¯></a></h1><time>Jan 21, 2023</time><br><div class=description>Index å‰è¨€ ç›®æ¨™ æ•…äº‹é–‹å§‹ é‡åˆ°ç“¶é ¸ é¸æ–°çš„å€™é¸äºº å•é¡Œ éœ€æ±‚ Data Modeling Bucket Dark Launch Trade-off Performance å‡ºå¤§äº‹æ‹‰ The Future Near Term Long Term çµèª å¿ƒå¾— å‰è¨€ é€™ç¯‡éƒ¨è½æ ¼æœƒç¿»è­¯å’Œåƒè€ƒ &lt;How Discord Stores Billions of Messages> é€™ç¯‡éƒ¨è½æ ¼çš„å…§å®¹åšæ•´ç†å’Œç¿»è­¯ã€‚
æˆ‘å€‹äººä¸€å‘å–œæ­¡ç ”ç©¶è‡ªå·±å–œæ­¡ç”¨çš„è»Ÿé«”ï¼Œèº«ç‚ºæ¯å¤©éƒ½æœƒä¸Š DC å’Œæœ‹å‹ç¤¾äº¤çš„æˆ‘ä¾†èªªï¼Œç ”ç©¶ä¸€ä¸‹é€™éº¼å²å®³çš„æœå‹™ï¼Œä¹Ÿæ˜¯æˆ‘çš„èˆˆè¶£ä¹‹æ‰€åœ¨ã€‚
ç›®æ¨™ é€™ç¯‡æ–‡ç« çš„ç›®æ¨™ä¹Ÿå¾ˆæ˜ç¢ºï¼ŒDiscord æ¯å¤©æœƒéœ€è¦è™•ç†ä¸€å„„çš„è¨Šæ¯ (100 million/day)ï¼Œé€™ç¯‡æ–‡ç« æœƒè§£é‡‹ä»–å€‘æ€éº¼åšåˆ°çš„ã€‚
æ•…äº‹é–‹å§‹ ç¾…é¦¬ä¸æ˜¯ä¸€å¤©é€ æˆçš„ï¼ŒDiscord åœ¨ 2015 å¹´åªèŠ±äº†å…©å€‹æœˆå°±å»ºç«‹å¥½äº†ç¬¬ä¸€ç‰ˆã€‚ç•¶æ™‚ä»–å€‘åªç”¨äº†ä¸€å° MongoDB ç•¶ä½œä¸»è¦ Databaseï¼Œä½œè€… (Discord CTO) ä¹Ÿç›´æ¥è¬›æ˜äº†ï¼Œç•¶æ™‚é¸ç”¨ MongoDB ç´”ç²¹åªæ˜¯ç‚ºäº†å¿«é€Ÿç–Šä»£ç”¢å“ï¼Œä»¥æœ€å¿«çš„é€Ÿåº¦å»æ‰“é€ å¸‚å ´æƒ³è¦çš„æ±è¥¿ã€‚å¾ä¸€é–‹å§‹å°±ä¸æ‰“ç®—ç”¨ Sharding çš„ MongoDBï¼Œä¸åƒ…è¤‡é›œé›£ç”¨è€Œä¸”é‚„ä¸ç©©å®šã€‚æ‰€ä»¥ä¸€é–‹å§‹ä½¿è¨­è¨ˆä¸Šå°±çµ¦å‡ºå¾ˆå¤§çš„ç§»æ¤ç‰¹æ€§ã€‚(MongoDB QQ)
åœ¨æ­¤ä¹‹ä¸Šï¼Œä½œè€…æå‡º Discord çš„æ ¸å¿ƒæ–‡åŒ–â€¦
Build quickly to prove out a product feature, but always with a path to a more robust solution&mldr;</div><a class=readmore href=/posts/discord-cassandra/>Read more âŸ¶</a></section><ul class=pagination><span class="page-item page-prev"><a href=/page/3/ class=page-link aria-label=Previous><span aria-hidden=true>â† Prev</span></a></span>
<span class="page-item page-next"><a href=/page/5/ class=page-link aria-label=Next><span aria-hidden=true>Next â†’</span></a></span></ul></main><footer><div style=display:flex><a class=soc href=https://github.com/tachunwu rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a></div><div class=footer-info>2023 ğŸ’  Â© Tachunn | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-2LYZQ778V0"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-2LYZQ778V0")</script><script>feather.replace()</script></div></body></html>