<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>&lt;Cassandra-based çš„è¨­è¨ˆæ¨¡å‹ï¼šChebotko Diagrams> - Tachunn Publication</title><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Index å‰è¨€ å…ˆå‚™çŸ¥è­˜ ç›®æ¨™ Cassandraâ€™s Data Model Keyspace Table Table Exampleï¼šsingle-row partitions Table Exampleï¼šmulti-row partitions Query Model Conceptual Data & Application Workflow Modeling å¯¦éš›æ¡ˆä¾‹ Logical Data Modeling Data Modeling Principles Mapping Rules Chebotko Diagrams Notation Logical Chebotko Diagram Physical Chebotko Diagram æ³¨æ„äº‹é … çµè«– å‰è¨€ é€™ç¯‡æ–‡ç« æœƒç¿»è­¯å’Œæ•´ç†ä¸€ç¯‡è«–æ–‡ <A Big Data Modeling Methodology for Apache Cassandra>ï¼Œé€™ç¯‡è«–æ–‡æ˜¯ç”±ç¶­è­· Apache Cassandra å•†ç”¨ç‰ˆ DataStax çš„å·¥ç¨‹å¸«æ‰€å¯«çš„è«–æ–‡ (ç™¼è¡¨åœ¨ 2015 IEEE BigDataCongress ä¸Š)ã€‚
æˆ‘å€‹äººèªç‚ºéå¸¸é©åˆåšç‚ºå­¸ç¿’ Cassandra é€™ç¨®ç³»çµ±çš„åŸºçŸ³ (å¦‚æœæœ‰ç¶“é©—ä¸€é»çš„è®€è€…æœƒç™¼ç¾ Google BigTable å’Œ AWS çš„ DynamoDB éƒ½å¯ä»¥é©ç”¨æœ¬è«–æ–‡çš„æ¦‚å¿µ)ã€‚"><meta property="og:image" content><meta property="og:title" content="<Cassandra-based çš„è¨­è¨ˆæ¨¡å‹ï¼šChebotko Diagrams>"><meta property="og:description" content="Index å‰è¨€ å…ˆå‚™çŸ¥è­˜ ç›®æ¨™ Cassandraâ€™s Data Model Keyspace Table Table Exampleï¼šsingle-row partitions Table Exampleï¼šmulti-row partitions Query Model Conceptual Data & Application Workflow Modeling å¯¦éš›æ¡ˆä¾‹ Logical Data Modeling Data Modeling Principles Mapping Rules Chebotko Diagrams Notation Logical Chebotko Diagram Physical Chebotko Diagram æ³¨æ„äº‹é … çµè«– å‰è¨€ é€™ç¯‡æ–‡ç« æœƒç¿»è­¯å’Œæ•´ç†ä¸€ç¯‡è«–æ–‡ <A Big Data Modeling Methodology for Apache Cassandra>ï¼Œé€™ç¯‡è«–æ–‡æ˜¯ç”±ç¶­è­· Apache Cassandra å•†ç”¨ç‰ˆ DataStax çš„å·¥ç¨‹å¸«æ‰€å¯«çš„è«–æ–‡ (ç™¼è¡¨åœ¨ 2015 IEEE BigDataCongress ä¸Š)ã€‚
æˆ‘å€‹äººèªç‚ºéå¸¸é©åˆåšç‚ºå­¸ç¿’ Cassandra é€™ç¨®ç³»çµ±çš„åŸºçŸ³ (å¦‚æœæœ‰ç¶“é©—ä¸€é»çš„è®€è€…æœƒç™¼ç¾ Google BigTable å’Œ AWS çš„ DynamoDB éƒ½å¯ä»¥é©ç”¨æœ¬è«–æ–‡çš„æ¦‚å¿µ)ã€‚"><meta property="og:type" content="article"><meta property="og:url" content="https://tachunwu.github.io/posts/cassandra/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-01-27T16:20:23+08:00"><meta property="article:modified_time" content="2023-01-27T16:20:23+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="<Cassandra-based çš„è¨­è¨ˆæ¨¡å‹ï¼šChebotko Diagrams>"><meta name=twitter:description content="Index å‰è¨€ å…ˆå‚™çŸ¥è­˜ ç›®æ¨™ Cassandraâ€™s Data Model Keyspace Table Table Exampleï¼šsingle-row partitions Table Exampleï¼šmulti-row partitions Query Model Conceptual Data & Application Workflow Modeling å¯¦éš›æ¡ˆä¾‹ Logical Data Modeling Data Modeling Principles Mapping Rules Chebotko Diagrams Notation Logical Chebotko Diagram Physical Chebotko Diagram æ³¨æ„äº‹é … çµè«– å‰è¨€ é€™ç¯‡æ–‡ç« æœƒç¿»è­¯å’Œæ•´ç†ä¸€ç¯‡è«–æ–‡ <A Big Data Modeling Methodology for Apache Cassandra>ï¼Œé€™ç¯‡è«–æ–‡æ˜¯ç”±ç¶­è­· Apache Cassandra å•†ç”¨ç‰ˆ DataStax çš„å·¥ç¨‹å¸«æ‰€å¯«çš„è«–æ–‡ (ç™¼è¡¨åœ¨ 2015 IEEE BigDataCongress ä¸Š)ã€‚
æˆ‘å€‹äººèªç‚ºéå¸¸é©åˆåšç‚ºå­¸ç¿’ Cassandra é€™ç¨®ç³»çµ±çš„åŸºçŸ³ (å¦‚æœæœ‰ç¶“é©—ä¸€é»çš„è®€è€…æœƒç™¼ç¾ Google BigTable å’Œ AWS çš„ DynamoDB éƒ½å¯ä»¥é©ç”¨æœ¬è«–æ–‡çš„æ¦‚å¿µ)ã€‚"><script src=https://tachunwu.github.io/js/feather.min.js></script>
<link href=https://tachunwu.github.io/css/fonts.2c2227b81b1970a03e760aa2e6121cd01f87c88586803cbb282aa224720a765f.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://tachunwu.github.io/css/main.ac08a4c9714baa859217f92f051deb58df2938ec352b506df655005dcaf98cc0.css></head><body><div class=content><header><script async src="https://www.googletagmanager.com/gtag/js?id=G-2LYZQ778V0"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-2LYZQ778V0")</script><div class=main><a href=https://tachunwu.github.io/>Tachunn Publication</a></div><nav><a href=/>Home</a>
<a href=/posts>All posts</a>
<a href=/about>About</a>
<a href=/tags>Tags</a></nav></header><main><article><div class=title><h1 class=title>&lt;Cassandra-based çš„è¨­è¨ˆæ¨¡å‹ï¼šChebotko Diagrams></h1><div class=meta>Posted on Jan 27, 2023</div></div><section class=body><p><img src=/images/cassandra_head.png alt><div><h2>Index</h2><nav id=TableOfContents><ol><li><a href=#å‰è¨€><strong>å‰è¨€</strong></a></li><li><a href=#å…ˆå‚™çŸ¥è­˜><strong>å…ˆå‚™çŸ¥è­˜</strong></a></li><li><a href=#ç›®æ¨™><strong>ç›®æ¨™</strong></a></li><li><a href=#cassandras-data-model><strong>Cassandraâ€™s Data Model</strong></a><ol><li><a href=#keyspace><strong>Keyspace</strong></a></li><li><a href=#table><strong>Table</strong></a></li><li><a href=#table-examplesingle-row-partitions><strong>Table Exampleï¼šsingle-row partitions</strong></a></li><li><a href=#table-examplemulti-row-partitions><strong>Table Exampleï¼šmulti-row partitions</strong></a></li><li><a href=#query-model><strong>Query Model</strong></a></li></ol></li><li><a href=#conceptual-data--application-workflow-modeling><strong>Conceptual Data & Application Workflow Modeling</strong></a><ol><li><a href=#å¯¦éš›æ¡ˆä¾‹><strong>å¯¦éš›æ¡ˆä¾‹</strong></a></li></ol></li><li><a href=#logical-data-modeling>Logical Data Modeling</a><ol><li><a href=#data-modeling-principles><strong>Data Modeling Principles</strong></a></li><li><a href=#mapping-rules><strong>Mapping Rules</strong></a></li></ol></li><li><a href=#chebotko-diagrams><strong>Chebotko Diagrams</strong></a><ol><li><a href=#notation><strong>Notation</strong></a></li><li><a href=#logical-chebotko-diagram><strong>Logical Chebotko Diagram</strong></a></li><li><a href=#physical-chebotko-diagram><strong>Physical Chebotko Diagram</strong></a></li></ol></li><li><a href=#æ³¨æ„äº‹é …><strong>æ³¨æ„äº‹é …</strong></a></li><li><a href=#çµè«–><strong>çµè«–</strong></a></li></ol></nav></div></p><h1 id=å‰è¨€><strong>å‰è¨€</strong></h1><p>é€™ç¯‡æ–‡ç« æœƒç¿»è­¯å’Œæ•´ç†ä¸€ç¯‡è«–æ–‡ &lt;<a href=https://ieeexplore.ieee.org/document/7207225>A Big Data Modeling Methodology for Apache Cassandra</a>>ï¼Œé€™ç¯‡è«–æ–‡æ˜¯ç”±ç¶­è­· Apache Cassandra å•†ç”¨ç‰ˆ DataStax çš„å·¥ç¨‹å¸«æ‰€å¯«çš„è«–æ–‡ (ç™¼è¡¨åœ¨ 2015 IEEE BigDataCongress ä¸Š)ã€‚</p><p>æˆ‘å€‹äººèªç‚ºéå¸¸é©åˆåšç‚ºå­¸ç¿’ Cassandra é€™ç¨®ç³»çµ±çš„åŸºçŸ³ <strong>(å¦‚æœæœ‰ç¶“é©—ä¸€é»çš„è®€è€…æœƒç™¼ç¾ Google BigTable å’Œ AWS çš„ DynamoDB éƒ½å¯ä»¥é©ç”¨æœ¬è«–æ–‡çš„æ¦‚å¿µ)</strong>ã€‚</p><p><strong>ç‰¹åˆ¥æ³¨æ„ï¼é€™ç¯‡è«–æ–‡ä¸æ˜¯è¬›è§£æ€éº¼å®‰è£æˆ–æ˜¯ä½¿ç”¨ Cassandraï¼Œè€Œæ˜¯æå‡ºä¸€ç¨® Cassandra å°ˆç”¨çš„æ–¹æ³•è«–ä¾† Model Cassandra</strong>ï¼Œå°±åƒæ˜¯å¦‚æœä½ è¦å­¸ Relational Database æœƒè¦çŸ¥é“ ER Model å’Œ Normal Form é€™äº›æ–¹æ³•ï¼Œè€Œ<strong>é€™ç¯‡è«–æ–‡ä¸»è¦çš„è²¢ç»å°±æ˜¯æå‡ºä¸€å¥—å¯è¡Œçš„æ–¹æ³•è«–ä¾†ä¾›æˆ‘å€‘è¨­è¨ˆç³»çµ±</strong>ã€‚</p><h1 id=å…ˆå‚™çŸ¥è­˜><strong>å…ˆå‚™çŸ¥è­˜</strong></h1><p>ç”±æ–¼ Cassandra æ˜¯å±¬æ–¼è¼ƒæ–°æ™‚ä»£çš„ Databaseï¼Œæ‰€ä»¥<strong>é€™ç¯‡è«–æ–‡æœƒæå‡ºå¾ˆå¤šæ¯”è¼ƒ Relational Database è¨­è¨ˆä¸Šçš„åŒç•°ä¹‹è™•</strong>ï¼Œæ‰€ä»¥è‡³å°‘å»ºè­°è®€è€…è¦æœ‰ä»¥ä¸‹çš„è§€å¿µï¼š</p><ul><li>ER Model (Entity-Relation)</li><li>Normal Form (3rd Normal Form)</li><li>ä¸€äº› SQL åŸºç¤çš„èªæ³•çš„è§€å¿µ</li></ul><h1 id=ç›®æ¨™><strong>ç›®æ¨™</strong></h1><p>ç›¸ä¿¡å„ä½å¦‚æœåˆ°é€™è£¡é‚„æ²’é—œæ‰æ–‡ç« ï¼Œæ‡‰è©²æ˜¯å·²ç¶“å¾ˆç†Ÿæ‚‰ Relational Database ä½†åˆæƒ³çœ‹çœ‹æ–°çš„æ±è¥¿æœ‰ä»€éº¼æœ‰è¶£çš„ï¼Œ<strong>ä½œè€…ä¸€é–‹å§‹å°±æŒ‡æ˜ï¼Œåƒè¬ä¸è¦æŠŠ Relational Database é‚£å¥—æƒ³æ³•æ¬éä¾†ç›´æ¥ç”¨ï¼</strong></p><p><strong>Relational Database çš„æ€è€ƒæ–¹å¼æ˜¯ä»¥è³‡æ–™ç‚ºä¸­å¿ƒï¼Œæœƒå…ˆæ§‹æ€ Entity å’Œ Relation ä¹‹é–“ä½œç‚ºåŸºç¤ï¼Œç”¨ Normal Form å»è¦ç¯„è³‡æ–™çš„é‡è¤‡æ€§</strong>ã€‚ä½†æ˜¯ <strong>Cassandra æ˜¯ä¸€å€‹ç‰¹åŒ–çš„ç³»çµ±ï¼Œè¨­è¨ˆä¸Šå·²ç¶“å°ˆé–€ç‚ºç‰¹å®šçš„ Query åšå„ªåŒ–</strong>ï¼Œæ‰€ä»¥éœ€è¦ç”¨å…¨æ–°çš„æ–¹æ³•ä¾†æ€è€ƒã€‚</p><p><img src=/images/cassandra_0.png alt></p><p>ä»¥ä¸Šæ˜¯å…©è€…ä¹‹é–“çš„å·®è·ï¼Œ<strong>é€™ç¯‡è«–æ–‡å°±æ˜¯åœ¨æè¿°é€™å…©ç¨®è¨­è¨ˆæ–¹å¼çš„å·®ç•°</strong>ï¼Œè©³ç´°æˆ‘å€‘å°±ç¹¼çºŒçœ‹ä¸‹å»å§ï¼</p><h1 id=cassandras-data-model><strong>Cassandraâ€™s Data Model</strong></h1><p>æˆ‘å€‘å°±å¾ Cassandra çš„ Data Model é–‹å§‹ä»‹ç´¹å§ï¼Cassandra çš„å’Œæ‰€æœ‰çš„ Database ä¸€æ¨£éƒ½æœ‰ schemaã€‚</p><h2 id=keyspace><strong>Keyspace</strong></h2><p><strong>æœ€ä¸Šå±¤çš„å«åš keyspace</strong>ï¼Œè² è²¬ç®¡ç†è¨±å¤š Cassandra Tableï¼Œè®€è€…å¯ä»¥é¡æ¯”æˆ <strong>Relational Database çš„ DATABASE</strong>ã€‚</p><h2 id=table><strong>Table</strong></h2><p><strong>æ³¨æ„ï¼é€™è£¡é–‹å§‹å°±å’Œ Relational Database æœ‰å¾ˆå¤§çš„ä¸åŒäº†ï¼</strong></p><ul><li>Cassandra Table ç”± <strong>partition æ§‹æˆ</strong>ï¼Œ<strong>partition ä¹‹ä¸­åˆæœ‰åŒ…å« row</strong></li><li>æ¯ä¸€å€‹ partition éƒ½æœƒæœ‰ä¸€å€‹ <strong>å”¯ä¸€çš„ partition key</strong></li><li>æ¯ä¸€å€‹åœ¨ partition ä¹‹ä¸­çš„ row åˆå¯ä»¥<strong>å¯é¸æ“‡æ€§çš„æœ‰å”¯ä¸€çš„ clustering key</strong></li><li>ä¸Šé¢çš„èªªçš„ key éƒ½å¯ä»¥ç”±<strong>å–®è¡Œæˆ–æ˜¯å¤šè¡Œçš„ row çµ„æˆ</strong></li><li><strong>partition key å’Œ clustering key çµ„æˆçš„å«åš primary key</strong></li><li>rows éƒ½æœƒä¾ç…§ <strong>clustering key ä¾†åšæ’åº</strong> (ascending/descending)</li><li>æ‰€æœ‰çš„ column å¯ä»¥æ˜¯å¸¸è¦‹çš„ data type æˆ–æ˜¯ä½¿ç”¨è€…è‡ªå®šç¾©çš„çµæ§‹</li><li>å”¯ä¸€ç‰¹åˆ¥çš„ column data type å«åš <strong>counterï¼Œä¸»è¦ç”¨ä¾†è™•ç† concurrent transaction</strong></li></ul><p><strong>å°è§€å¯Ÿ 1</strong>ï¼šç”±æ–¼ clustering key æ˜¯å¯ä»¥é¸æ“‡ä¸è¦ï¼Œé€™å€‹æ™‚å€™ primary key å°±æ˜¯ partition key</p><p><strong>å°è§€å¯Ÿ 2</strong>ï¼šæœ‰ clustering key çš„ Table å°±æœ‰ multi-row partitions</p><p>æˆ‘ç›¸ä¿¡å„ä½ä¸€å®šè·Ÿæˆ‘ä¸€æ¨£ï¼Œ<strong>çœ‹åˆ°é€™è£¡é ­æ—©å°±æ˜æ‰äº†(QQ)ï¼Œåˆ°åº•åœ¨å…¬ä¸‰å° xD</strong>ã€‚</p><p>æ‰€ä»¥ä½œè€…æœ‰å¹«æˆ‘å€‘èˆ‰å‡ºå¯¦éš›çš„ä¾‹å­ï¼Œæˆ‘å€‘å¯ä»¥å…ˆçœ‹ä¸€ä¸‹å¯¦éš›ä¾‹å­ï¼Œå†å›é ­çœ‹çœ‹é€™äº›è¦å‰‡ï¼</p><h2 id=table-examplesingle-row-partitions><strong>Table Exampleï¼šsingle-row partitions</strong></h2><p>é¦–å…ˆé€™å€‹ä¾‹å­æ˜¯ä»‹ç´¹ <strong>single-row partitions table</strong>ï¼Œartifacts æ˜é¡¯æ˜¯åç¨±ï¼Œé€™å€‹è¡¨ä¸­åªæœ‰ partition keyï¼Œç”±æ–¼ partition key + clustering key = primary keyï¼Œæ‰€ä»¥ primary key å°±æ˜¯ artifact_idã€‚</p><p><img src=/images/cassandra_1.png alt></p><h2 id=table-examplemulti-row-partitions><strong>Table Exampleï¼šmulti-row partitions</strong></h2><p>é€™å€‹ä¾‹å­å‰‡æ˜¯ <strong>multi-row partitions table</strong>ï¼Œartifacts_by_venue é€™å¼µè¡¨ç”¨ <strong>(venue name, year)</strong> çµ„æˆ <strong>partition key (ç´«è‰²æ¡†æ¡†)</strong>ã€‚</p><p>clustering key å‰‡æ˜¯ artifact idã€‚æˆ‘å€‘å¯ä»¥çœ‹åˆ°æœ‰ä¸‰å€‹ä¸åŒçš„ partitions è£¡é¢éƒ½æœ‰å¾ˆå¤šrowsï¼Œå¦‚æœæˆ‘å€‘æª¢æŸ¥ æ¯ä¸€å€‹ partition å°±æœƒç™¼ç¾ rows çš„é †åºæœƒç…§ <strong>clustering key æ’åº (ç´…è‰²æ¡†æ¡†)</strong>ã€‚</p><p><img src=/images/cassandra_2.png alt></p><h2 id=query-model><strong>Query Model</strong></h2><p>æ¥ä¸‹ä¾†æˆ‘å€‘ä»‹ç´¹ Cassandra çš„ Queryï¼Œå–åå«åš CQLï¼Œé›–ç„¶æ¨¡æ“¬ SQLï¼Œä½†æ˜¯å»æ²’æœ‰æ‰€æœ‰ SQL çš„ç‰¹æ€§ï¼Œä¾‹å¦‚ï¼šæ²’æœ‰ JOINã€‚ä»¥ä¸‹æ˜¯ä¸€äº› Query çš„åŸå‰‡ï¼š</p><ul><li>åªæœ‰ primary key å¯ä»¥æ”¾åœ¨ query predicate</li><li>partition key ä¸€å®šè¦ filter (ä¾‹å¦‚ï¼šequality search)</li><li>clustering key ä½ å¯ä»¥è‡ªç”±ä½¿ç”¨åœ¨ predicate</li><li>å¦‚æœ clustering key è¢«ç”¨åœ¨ predicateï¼Œé‚£éº¼æ‰€æœ‰åœ¨ primary key ä¸­å…ˆå‰çš„ column éƒ½å¿…é ˆè¦ç”¨ä¸Šã€‚</li><li>å¦‚æœ clustering key è¢«ç”¨ä¾†åš range scan predicateï¼Œé‚£éº¼æ‰€æœ‰åœ¨ primary key ä¸­å…ˆå‰çš„ column éƒ½å¿…é ˆè¦ç”¨ä¸Šï¼Œè€Œä¸”å…¶ä»–çš„ column ä½ éƒ½ä¸èƒ½ä½¿ç”¨åœ¨ predicate</li></ul><p>æœ€å¾Œå…©é»æ¯”è¼ƒé›£ä»¥ç†è§£ï¼Œæˆ‘å€‘ç”¨ä¸‹é¢çš„ä¾‹å­ç•¶èªªæ˜ï¼Œclustering key æ˜¯ artifact_id (ç´…è‰²æ¡†æ¡†)ï¼Œç”±æ–¼æˆ‘å€‘ç”¨åˆ°äº†å®ƒï¼Œæ‰€ä»¥å‰é¢æ‰€æœ‰çš„ primary key çš„ column éƒ½è¦ä½¿ç”¨é€²å» (ç´«è‰²æ¡†æ¡†)ã€‚</p><p><img src=/images/cassandra_3.png alt></p><p><em>è¨»è¨˜ï¼š predicate å°±æ˜¯ WHERE å¾Œé¢é‚£ä¸€æ•´åŒ…</em></p><h1 id=conceptual-data--application-workflow-modeling><strong>Conceptual Data & Application Workflow Modeling</strong></h1><p>ä»‹ç´¹å®Œ Cassandra åŸºæœ¬çš„æ¨¡å‹ï¼Œçµ‚æ–¼è¦é€²å…¥æ­£é¡Œï¼Œå¦‚ä½•è¨­è¨ˆ Applicationï¼</p><p>é€™ç¯‡æ–‡ç« çš„ä½œè€…ä¸€ç›´é‡ç”³ï¼ŒER Model çœŸçš„æ˜¯å¾ˆå¥½çš„æ¨¡å‹ï¼Œå°±ç®—ä¸ç”¨ä¾†é–‹ç™¼ Applicationï¼Œä¹Ÿæ˜¯ä¸€å€‹éå¸¸å¥½çš„æŠ½è±¡ç®¡ç†è³‡æ–™çš„æ–¹å¼ã€‚</p><p>åªæ˜¯ Cassandra ä¸é©åˆï¼ŒCassandra å°±æ˜¯è¢«å‰µé€ å‡ºä¾†å®ŒæˆæŸäº› Workload è€Œè¨­è¨ˆçš„ã€‚æ‰€ä»¥ä½œè€…ç›´æ¥çµ¦æˆ‘å€‘ä¸€å€‹ Application çš„èªå¢ƒï¼Œè®“æˆ‘å€‘å­¸è‘—ç”¨ Cassandra è¨­è¨ˆã€‚</p><h2 id=å¯¦éš›æ¡ˆä¾‹><strong>å¯¦éš›æ¡ˆä¾‹</strong></h2><p><strong>å‡è¨­æˆ‘å€‘è¨­è¨ˆä¸€å€‹æ•¸ä½åœ–æ›¸çš„æœå‹™</strong>ï¼Œä¿å­˜äº†ä¸åŒçš„ <strong>artifacts (æœ‰ papers å’Œ posters)</strong> ä¹‹é¡çš„ï¼Œæœƒä¿å­˜åœ¨ä¸åŒçš„ <strong>venues</strong>ã€‚<strong>users</strong> å¯ä»¥ç•™è¨€è©•è«– <strong>venues å’Œ artifacts åƒæ˜¯ reviewsã€likesã€ratings</strong> ä¹‹é¡çš„ï¼Œå¦‚æœç•« ER Model å¤§æ¦‚æœƒé•·é€™æ¨£ã€‚</p><p><img src=/images/cassandra_4.png alt></p><p>æ¥ä¸‹ä¾†ç•«å‡ºä½¿ç”¨è€…çš„ workflow æœƒæ˜¯åƒé€™æ¨£ã€‚</p><p><img src=/images/cassandra_5.png alt></p><h1 id=logical-data-modeling>Logical Data Modeling</h1><p>é€™å€‹éƒ¨åˆ†æ˜¯ Cassandra çš„é—œéµï¼Œä¸Šé¢åˆ—å‡ºä¾†çš„æ±è¥¿ Relation Model ä¹Ÿè¦åšï¼Œé€™å€‹æ­¥é©Ÿé–‹å§‹å°±æœƒæœ‰å®Œå…¨ä¸åŒçš„èµ°å‘ã€‚ä½œè€…æä¾›äº†ä¸€äº›æŠ€å·§çµ¦æˆ‘å€‘åƒè€ƒ (å¾Œæ–‡çµ±ç¨± DMPï¼šData Modeling Principles)</p><h2 id=data-modeling-principles><strong>Data Modeling Principles</strong></h2><h3 id=dmp-1know-your-data><strong>DMP 1ï¼šKnow Your Data</strong></h3><p>é€™å€‹éƒ¨åˆ†æˆ‘çœ‹äº†ä¹‹å¾Œè¦ºå¾—å’Œ ER Model è¦æ³¨æ„çš„äº‹æƒ…å·®ä¸å¤šï¼ŒçŸ¥é“ä½ çš„ Entity Relation ä¹‹é–“çš„é—œä¿‚ï¼Œæ˜¯ä¸€å°ä¸€ã€ä¸€å°å¤šã€å¤šå°ã€ã€å¤šå°ä¸€ï¼Œé‚„æœ‰ä¸€äº›å•†æ¥­é‚è¼¯ä¸Šçš„é™åˆ¶ï¼Œå®Œå…¨æ˜¯åŸºæœ¬åŠŸ XD</p><h3 id=dmp-2know-your-queries><strong>DMP 2ï¼šKnow Your Queries</strong></h3><p>é€™å€‹æ­¥é©Ÿå°±æ˜¯æŠŠä½¿ç”¨è€… workflow è½‰æ›æˆçœŸæ­£çš„ queriesï¼Œä½œè€…çµ±æ•´äº†ä¸‰ç¨®æŸ¥è©¢çš„æ–¹å¼ï¼š</p><ol><li>æŸ¥è©¢ä¸€å€‹ partition</li><li>æŸ¥è©¢å¤šå€‹ partition</li><li>æŸ¥è©¢å¤šå€‹ table</li></ol><p>é¡¯ç„¶ï¼ŒæŸ¥è©¢ä¸€å€‹ partitionæ˜¯æœ€å¿«çš„ï¼Œé€šå¸¸å°±å›å‚³ä¸€å€‹ rowï¼Œå¤šæ•¸ OLTP çš„ query æ¯å€‹ä½¿ç”¨è€…éƒ½åªæœƒæ¥è§¸åˆ°è‡ªå·±é‚£éƒ¨åˆ†çš„è³‡æ–™ï¼Œä¸éä¹Ÿæœƒæœ‰éœ€è¦æŸ¥è©¢è¤‡æ•¸ partition/table çš„ queryï¼Œé€™ç¨®å°±è¦ç‰¹åˆ¥å°å¿ƒæ•ˆèƒ½ä¸Šçš„å•é¡Œã€‚</p><h3 id=dmp-3data-nesting><strong>DMP 3ï¼šData Nesting</strong></h3><p>å·¢ç‹€å¼è³‡æ–™é€šå¸¸æ˜¯ç®¡ç†æŸäº›ç›¸åŒç‰¹æ€§çš„è³‡æ–™ï¼Œå°±ä»¥é€™å€‹ä¾‹å­ä¾†èªªï¼Œ<strong>artifacts_by_venue é€™å¼µè¡¨æŠŠ artifacts é€™äº› rows â€œNestingâ€ åœ¨ venues é€™å€‹ partitions</strong>ï¼Œé€™ç¨®ä¾‹å­åœ¨ Cassandra è¶…ç´šå¸¸è¦‹ã€‚</p><h3 id=dmp-4data-duplication><strong>DMP 4ï¼šData Duplication</strong></h3><p>Cassandra æœƒæŠŠè³‡æ–™è¤‡è£½ï¼Œä¾†æ‡‰ä»˜å„ç¨®æŸ¥è©¢ï¼Œ<strong>èˆ‰ä¾‹ä¾†èªªï¼Œä¸Šé¢ Application workflow çš„ Q1, Q2ï¼Œæœƒåˆ†åˆ¥é–‹åœ¨ä¸åŒçš„ tableï¼Œæ“æœ‰å„è‡ªçš„ primary keyï¼Œé€™æ˜¯ä¸€ç¨®ä»¥å„²å­˜ç©ºé–“æ›å–æ™‚é–“çš„ç­–ç•¥</strong>ã€‚</p><h2 id=mapping-rules><strong>Mapping Rules</strong></h2><p>æ…¢æ…¢çš„è®€è€…æ‡‰è©²å¯ä»¥æ„Ÿè¦ºåˆ°ï¼Œ<strong>Cassandra ä¸æ˜¯ Data-driven è€Œæ˜¯ Query-driven</strong>ï¼Œä½œè€…æä¾›äº†<strong>äº”ç¨®æ–¹å¼</strong>ä¾†å¹«æˆ‘å€‘å®Œæˆé€™äº›è½‰æ›ã€‚</p><h3 id=mr1entities-and-relationships><strong>MR1ï¼šEntities and Relationships</strong></h3><p>é‚è¼¯ä¸Šä½ é‚„æ˜¯æ˜¯è¦åˆ— ER Modelï¼Œé€™å¯ä»¥é¿å…é‚è¼¯ä¸Šçš„æ˜é¡¯éŒ¯èª¤ï¼Œé•åäº†ä½ æœƒåšå‡ºéŒ¯èª¤åˆå¥‡æ€ªçš„ Applicationã€‚</p><h3 id=mr2equality-search-attributes><strong>MR2ï¼šEquality Search Attributes</strong></h3><p>ç”±æ–¼ query predicate æœ‰å¤©ç”Ÿçš„é™åˆ¶ (ä¸Šé¢çš„è¦å‰‡æˆ‘æœ‰è¬›ç´°ç¯€)ï¼Œprimary key æœ¬èº«çš„é †åºéå¸¸é‡è¦ï¼Œå°¤å…¶æ˜¯ partition key å’Œ clustering keyï¼Œæ²’è¨­è¨ˆå¥½ï¼Œä½ æœ‰äº› Equality search query æœƒæ ¹æœ¬ä¸èƒ½è·‘ã€‚</p><h3 id=mr3inequality-search-attributes><strong>MR3ï¼šInequality Search Attributes</strong></h3><p>é€™é»å’Œ MR2 è¬›çš„æ˜¯åŒæ¨£çš„äº‹æƒ…ï¼Œåªæ˜¯é€™å€‹æ˜¯è¬› Inequality Search çš„éƒ¨åˆ†ï¼ŒCassandra çš„ predicate éœ€è¦è€ƒæ…® partition key å’Œ clustering keyã€‚</p><h3 id=mr4ordering-attributes><strong>MR4ï¼šOrdering Attributes</strong></h3><p>å¦‚æœä½ éœ€è¦æœ‰ Ordering <strong><strong><strong><strong><strong><strong><strong>çš„</strong></strong></strong></strong></strong></strong></strong> queryï¼Œclustering key å°±éœ€è¦ç‰¹åˆ¥æ³¨æ„ï¼Œå› ç‚º Cassandra æ˜¯ç…§é€™å€‹ key æ’åºã€‚</p><h3 id=mr5key-attributes><strong>MR5ï¼šKey Attributes</strong></h3><p>é€™é»ä¹Ÿæ˜¯å¾ˆåŸºæœ¬ï¼Œç”±æ–¼è³‡æ–™æœ¬èº«æ˜¯è¢« primary key ç®¡ç†ï¼Œå¦‚æœä¸å°å¿ƒå¤±å»å”¯ä¸€æ€§å¾ˆå¯èƒ½å°è‡´è·Ÿè‘—é€™äº› primary key çš„è³‡æ–™æ¶ˆå¤±ã€‚</p><h3 id=mr-example><strong>MR Example</strong></h3><p>æˆ‘å€‘å°±æ ¹æ“šä¸Šé¢çš„è¦å‰‡ä¾†è¨­è¨ˆçœ‹çœ‹ï¼</p><ul><li>MR1ï¼šartifacts by venue é€™å¼µ table å¯ä»¥å°æ‡‰æˆ‘å€‘çš„ ER Model</li><li>MR2ï¼šæˆ‘å€‘ç”¨ K è¡¨ç¤º partition keyï¼Œè®“ venue_name å¯ä»¥è¢«ç”¨ Equality Search</li><li>MR3ï¼šæˆ‘å€‘ç”¨ C è¡¨ç¤º clustering keyï¼Œè®“æˆ‘å€‘å¯ä»¥æ ¹æ“šå¹´åˆ†ä¾†æ’é †åº</li><li>MR4ï¼šæˆ‘å€‘è¦è€ƒæ…®ä¸€ä¸‹ query ã„’è¦çš„é †åºæ˜¯ä¸Šå‡é‚„æ˜¯ä¸‹é™ï¼Œåœ¨åœ–ä¸­çš„è¨˜è™Ÿå¯ä»¥ç”¨ä¸Šä¸‹ç®­é ­è¡¨ç¤º</li><li>MR5ï¼šæœ€å¾Œæˆ‘å€‘éœ€è¦ artifact_id çš„ç‰¹æ€§ï¼ŒæŠŠå®ƒåˆ—å…¥ clustering key ä¹‹ä¸­</li></ul><p><img src=/images/cassandra_6.png alt></p><p>æˆ‘å€‘åœ¨ä¸Šé¢çš„ä¾‹å­å¯ä»¥çŸ¥é“ Cassandra è¨­è¨ˆçš„ä¸€äº›æ¨¡å¼ï¼Œç°¡è€Œè¨€ä¹‹ï¼Œå°±æ˜¯ä»¥ Query ç‚ºä¸­å¿ƒå»ç™¼æƒ³ï¼Œä¸Šé¢çš„ä¾‹å­æˆ‘å€‘çµ¦å‡º 1:N çš„æ¨¡å¼å¦‚ä½•å»ºæ§‹ã€‚</p><p><img src=/images/cassandra_7.png alt></p><h1 id=chebotko-diagrams><strong>Chebotko Diagrams</strong></h1><p>æˆ‘å€‘å…¶å¯¦åªè§£é‡‹äº†ä¸€å€‹ä¾‹å­ï¼Œä½†æ˜¯é€™æ•´å€‹æ‡‰ç”¨ç¨‹å¼é‚„æœ‰å…¶ä»– Query æ²’è§£æ±ºï¼ä½œè€…æå‡ºä¸€ç¨®æ–¹æ³•å«åš Chebotko Diagram ä¹Ÿå°±æ˜¯æŠŠä¸Šé¢çš„ä¾‹å­ä¸€èˆ¬åŒ–çš„æ–¹å¼ã€‚</p><h2 id=notation><strong>Notation</strong></h2><p>æˆ‘å€‘å…ˆäº†è§£ä¸€ä¸‹ Chebotko Diagrams Notation çš„ç”¨æ³•ï¼Œå…¶å¯¦è »å¥½ç†è§£çš„ï¼Œå°±ä¸å¤šåšè§£é‡‹ã€‚</p><p><img src=/images/cassandra_8.png alt></p><h2 id=logical-chebotko-diagram><strong>Logical Chebotko Diagram</strong></h2><p>ä»¥ä¸‹å°±æ˜¯ä¸Šé¢ Application çš„è¨­è¨ˆï¼Œ<strong>å…¶å¯¦æ¦‚å¿µä¸ŠçœŸçš„æ˜¯ç°¡å–®ç²—æš´ï¼Œæœ‰å¹¾å€‹ Query å°±é–‹å¹¾å¼µè¡¨</strong> XDï¼Œä¸ééç¨‹ä¸­é‚„æ˜¯éœ€è¦æ³¨æ„é‚£äº›è¦å‰‡å°±æ˜¯äº†ã€‚</p><p><img src=/images/cassandra_9.png alt></p><h2 id=physical-chebotko-diagram><strong>Physical Chebotko Diagram</strong></h2><p>æœ€å¾Œè«–æ–‡æœ‰ç¤ºç¯„ä¸€é»é»å„ªåŒ–çš„æŠ€å·§ï¼Œä¾‹å¦‚ï¼š</p><ol><li>Artifacts_by_venue å’Œ Artifacts_by_author åŠ å…¥ä¸€å€‹ avg_rating æ¬„ä½ï¼Œé¿å…é¡å¤–çš„ lookup</li><li>Reviews_by_user ç§»é™¤äº† timestamp æ¬„ä½ï¼Œå› ç‚º review_id å¯ä»¥ç”¨ TIMEUUID è¡¨ç¤º</li></ol><p><img src=/images/cassandra_10.png alt></p><h1 id=æ³¨æ„äº‹é …><strong>æ³¨æ„äº‹é …</strong></h1><p>Physical Data Modeling ä¹Ÿæ˜¯ä¸€å€‹ç’°ç¯€ï¼Œä¸éåœ¨æœ¬è«–æ–‡ä¸­ä¸¦æ²’æœ‰æåˆ°ç´°ç¯€ï¼Œé€™éƒ¨åˆ†éœ€è¦å°åŸºç¤è¨­æ–½çš„é‹ä½œé‚„æœ‰å¯¦éš›ç‹€æ³åšè¨è«–ï¼Œå·²ç¶“åé›¢æœ¬è«–æ–‡çš„ä¸»é¡Œäº† (ä¾‹å¦‚ï¼špartition splitting, inverted indexes, data aggregation, concurrent data access)ï¼Œæ‰€ä»¥æˆ‘æ²’æœ‰æ‰“ç®—å»æŠŠå¼•ç”¨çš„è«–æ–‡å±•é–‹ä¾†è¨è«–ï¼Œå„ä½è®€è€…æœ‰èˆˆè¶£æˆ‘å€‘æœ‰æ©Ÿæœƒå†èŠèŠã€‚</p><p>é‚„æœ‰ Chebotko Diagram é€™å€‹éç¨‹å¯ä»¥è‡ªå‹•åŒ–ï¼Œä¹Ÿæœ‰ä¸€äº›å·¥å…· Wayne State University æœ‰é–‹ç™¼ä¸€å¥— KDM çš„å·¥å…·ï¼Œä¸éç¶²ç«™å¥½åƒæ›æ‰äº†ï¼Œå“ˆå“ˆ ==â€ã€‚</p><h1 id=çµè«–><strong>çµè«–</strong></h1><p>é€™ç¯‡è«–æ–‡æå‡ºçš„æ–¹æ³•è«–éå¸¸çš„å‹™å¯¦ï¼Œä¹Ÿçµ¦å‡ºå¾ˆå®¹æ˜“æ‡‚çš„ä¾‹å­ï¼Œé›–ç„¶èªª Cassandra åœ¨ ç›®å‰çœŸæ­£æœ€æ–°çš„ Database é ˜åŸŸå·²ç¶“ä¸ç®—æ˜¯æœ€æ–°çš„ï¼Œä½†æ˜¯<strong>çµ•å°æ˜¯ç¶“éå¯¦æˆ°æ¸¬è©¦çš„ä¸€å¥—ç³»çµ±</strong>ï¼Œå¯«é€™ç¯‡è«–æ–‡çš„å·¥ç¨‹å¸«æœ¬èº«å°±æ˜¯ DataStax (å•†ç”¨ç‰ˆçš„ Cassandra åˆ†æ”¯) çš„å·¥ç¨‹å¸«ï¼Œè‡ªç„¶èƒ½å¤ æœ‰å¾ˆé«˜çš„åƒè€ƒæ€§ï¼Œåœ¨ IEEE çš„å¼•ç”¨æ¬¡æ•¸ä¹Ÿå¾ˆé«˜ï¼Œ<strong>ä½œç‚º NoSQL çš„å…¥é–€ç£šæˆ‘è¦ºå¾—ç•¶ä¹‹ç„¡æ„§ XD</strong>ã€‚</p></section><div class=post-tags></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/tachunwu rel=me title=GitHub><i data-feather=github></i></a>
<a class=border></a></div><div class=footer-info>2023 ğŸ’  Â© Tachunn | <a href=https://github.com/athul/archie>Archie Theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></footer><script async src="https://www.googletagmanager.com/gtag/js?id=G-2LYZQ778V0"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-2LYZQ778V0")</script><script>feather.replace()</script></div></body></html>