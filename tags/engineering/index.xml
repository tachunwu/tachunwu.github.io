<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Engineering on Tachunn Publication</title><link>https://tachunwu.github.io/tags/engineering/</link><description>Recent content in Engineering on Tachunn Publication</description><generator>Hugo -- gohugo.io</generator><language>en-us</language><copyright>ğŸ’  Â© Tachunn</copyright><lastBuildDate>Thu, 02 Feb 2023 23:27:11 +0800</lastBuildDate><atom:link href="https://tachunwu.github.io/tags/engineering/index.xml" rel="self" type="application/rss+xml"/><item><title>&lt;Kubernetes: ä¸€ç¨®çˆµå£«å³èˆˆæ¼”å‡ºï¼></title><link>https://tachunwu.github.io/posts/jazz-kubernetes/</link><pubDate>Thu, 02 Feb 2023 23:27:11 +0800</pubDate><guid>https://tachunwu.github.io/posts/jazz-kubernetes/</guid><description>Index å°è¨€ å‰è¨€ é å…ˆçŸ¥è­˜ å…¶å¯¦ä¸æ˜¯ Container Orchestrationï¼Ÿ kubernetes ç³»çµ±å’Œå…ƒä»¶è§£é‡‹ Datastore: etcd Policy Layer: API Server Business Logic: Controller Manager &amp;amp; Scheduler Scheduler Controller Node Agent: Kubelet Workflow çµè«– å¿ƒå¾— é™„éŒ„ï¼šchubby Families å°è¨€ é€™ç¯‡æ–‡ç« æœƒç¿»è­¯ä»‹ç´¹ &amp;lt;Core Kubernetes: Jazz Improv over Orchestration&amp;gt; é€™ç¯‡æ–‡ç« ï¼Œä¸»è¦è¬›è§£ kubernetes çš„é‹ä½œåŸç† (ä¸æ˜¯æ€éº¼ä½¿ç”¨å–” XD)ã€‚æ–‡ç« ä½œè€…æ˜¯ kubernetes ä¸‰ä½å‰µå§‹äººä¹‹ä¸€çš„ Joe Bedaï¼Œä»–ç”¨å¾ˆç²¾ç°¡çš„èªè¨€å’Œä¾‹å­ç‚ºæˆ‘å€‘åˆ†æ kubernetes é€™æ¨£çš„ç³»çµ±ã€‚
å‰è¨€ é€™ç¯‡æ–‡ç« æœƒä»”ç´°è¬›è§£ kubernetes å…§éƒ¨å¦‚ä½•é‹ä½œï¼Œä½œè€…ç›´æ¥åœ¨ç¬¬äºŒå¥è©±å°±èªªï¼Œå¦‚æœä½ æ˜¯éœ€è¦çŸ¥é“å¦‚ä½• Operate kubernetes çš„äºº (æ¯”å¦‚èªªå®‰è£æˆ–æ˜¯ç”¨ kubectl)ï¼Œæ˜¯ä¸éœ€è¦æ‡‚é€™äº›çš„ XDã€‚é€™ç¯‡æ–‡ç« çš„å—çœ¾ï¼Œæ˜¯çµ¦é‚£äº›æƒ³è¦æ·±å…¥äº†è§£ kubernetes å…§éƒ¨çš„äººçš„ã€‚
é å…ˆçŸ¥è­˜ ç”±æ–¼é€™ç¯‡æ–‡ç« æœƒæ¡ç”¨å¤§é‡ç¯‡å¹…çš„ k8s å°ˆæœ‰åè©ï¼Œæ‰€ä»¥è‡³å°‘å¸Œæœ›ä½ çŸ¥é“ä¸€äº› kubernetes çš„åè©çš„å®šç¾©ï¼Œä¾‹å¦‚
Pod Node Kubelet â€¦etc å…¶å¯¦ä¸æ˜¯ Container Orchestrationï¼Ÿ å¾ŒçºŒçš„ç¯‡å¹…æˆ‘å€‘æœƒä»‹ç´¹ kubernetes æ˜¯å¦‚ä½•é‹ä½œçš„ï¼Œä¸éä½œè€…å»å…ˆåšäº†ä¸€é»åè©ä¸Šçš„æ¾„æ¸…ã€‚å¦‚æœä½ å» Google æŸ¥ kubernetesï¼Œå¤šåŠæœƒå‘Šè¨´ä½ é€™æ˜¯ä¸€ç¨® Container Orchestrationï¼ŒOrchestration é€™å€‹è©åƒæ˜¯æœ‰ä¸€å€‹äº¤éŸ¿æ¨‚åœ˜çš„ä¸­å¿ƒæŒ‡æ®å®¶ï¼ŒæŒ‡æ®è‘—æ¨‚åœ˜çš„æ¼”å¥ã€‚</description></item><item><title>&lt;Discord å¦‚ä½• Full-text Index æ•¸åå„„çš„è¨Šæ¯></title><link>https://tachunwu.github.io/posts/discord-fulltext/</link><pubDate>Mon, 30 Jan 2023 18:02:17 +0800</pubDate><guid>https://tachunwu.github.io/posts/discord-fulltext/</guid><description>Index å‰è¨€ éœ€æ±‚ è§£æ±ºæ–¹æ¡ˆ Question 1ï¼šæˆ‘è©²ç”¨å¤–éƒ¨çš„ SaaS å»è§£æ±ºé€™å€‹å•é¡Œå—ï¼Ÿ Question 2ï¼šæœ‰ Open-source çš„æ–¹æ¡ˆå¯ä»¥ç”¨å—ï¼Ÿ æˆ‘å€‘è©²â€å…¨é¢â€ç›¸ä¿¡ Elasticsearch å—ï¼Ÿ å…ƒä»¶çš„ç´°ç¯€ é«˜å±¤æ¬¡åˆ†æ Insert å…ƒä»¶ Shard Manage å…ƒä»¶ Indexing &amp;amp; Mapping the Data å¯¦éš›ä¸Š Coding çš„å¯¦ä½œ å¯¦éš›åœ¨ Production çš„éç¨‹ åˆå§‹åŒ–å¯¦é©— ç ”ç©¶çš„ç²¾ç¥ æ›´æ–°çš„ç…©æƒ± The Future Exampleï¼šUnhealthy Cluster (ran out of heap) Exampleï¼šHealthy Cluster çµè«– æ„Ÿæƒ³ å‰è¨€ é€™ç¯‡éƒ¨è½æ ¼æœƒç¿»è­¯å’Œåƒè€ƒ &amp;lt;How discord indexes billions of messages&amp;gt; é€™ç¯‡æ–‡ç« çš„å…§å®¹åšæ•´ç†å’Œç¿»è­¯ã€‚
é€™ç¯‡ç®—æ˜¯ &amp;lt;Discord å¦‚ä½•è™•ç†æ•¸åå„„çš„è¨Šæ¯&amp;gt; çš„ä¸‹é›†ï¼Œç•¶æœ‰äº†æœ€æ ¸å¿ƒçš„è¨Šæ¯è®€å¯«ç³»çµ±ã€‚ä¸‹ä¸€å€‹å¾ˆé‡è¦çš„ feature å°±æ˜¯ Full-text Searchã€‚
èˆ‰ä¾‹ä¾†èªªï¼ŒUser çªç„¶æƒ³åˆ°ä»¥å‰å’ŒåŒä¼´è¨è«–çš„æŸå€‹è­°é¡Œï¼Œä¸å¯èƒ½æ…¢æ…¢æ»‘å»æ‰¾ï¼Œè€Œæ˜¯è¦ç”¨åƒæ˜¯ Search Engine é€™æ¨£çš„åŠŸèƒ½ï¼Œé€™ç¯‡æ–‡ç« å°±æ˜¯åœ¨ä»‹ç´¹ Discord å¦‚ä½•åšåˆ°é€™ç¨®åŠŸèƒ½ã€‚</description></item><item><title>&lt;Cassandra-based çš„è¨­è¨ˆæ¨¡å‹ï¼šChebotko Diagrams></title><link>https://tachunwu.github.io/posts/cassandra/</link><pubDate>Fri, 27 Jan 2023 16:20:23 +0800</pubDate><guid>https://tachunwu.github.io/posts/cassandra/</guid><description>Index å‰è¨€ å…ˆå‚™çŸ¥è­˜ ç›®æ¨™ Cassandraâ€™s Data Model Keyspace Table Table Exampleï¼šsingle-row partitions Table Exampleï¼šmulti-row partitions Query Model Conceptual Data &amp;amp; Application Workflow Modeling å¯¦éš›æ¡ˆä¾‹ Logical Data Modeling Data Modeling Principles Mapping Rules Chebotko Diagrams Notation Logical Chebotko Diagram Physical Chebotko Diagram æ³¨æ„äº‹é … çµè«– å‰è¨€ é€™ç¯‡æ–‡ç« æœƒç¿»è­¯å’Œæ•´ç†ä¸€ç¯‡è«–æ–‡ &amp;lt;A Big Data Modeling Methodology for Apache Cassandra&amp;gt;ï¼Œé€™ç¯‡è«–æ–‡æ˜¯ç”±ç¶­è­· Apache Cassandra å•†ç”¨ç‰ˆ DataStax çš„å·¥ç¨‹å¸«æ‰€å¯«çš„è«–æ–‡ (ç™¼è¡¨åœ¨ 2015 IEEE BigDataCongress ä¸Š)ã€‚
æˆ‘å€‹äººèªç‚ºéå¸¸é©åˆåšç‚ºå­¸ç¿’ Cassandra é€™ç¨®ç³»çµ±çš„åŸºçŸ³ (å¦‚æœæœ‰ç¶“é©—ä¸€é»çš„è®€è€…æœƒç™¼ç¾ Google BigTable å’Œ AWS çš„ DynamoDB éƒ½å¯ä»¥é©ç”¨æœ¬è«–æ–‡çš„æ¦‚å¿µ)ã€‚</description></item><item><title>&lt;Discord å¦‚ä½•è™•ç†ä¸€å¤©æ•¸å„„çš„è¨Šæ¯></title><link>https://tachunwu.github.io/posts/discord-cassandra/</link><pubDate>Sat, 21 Jan 2023 16:06:39 +0800</pubDate><guid>https://tachunwu.github.io/posts/discord-cassandra/</guid><description>Index å‰è¨€ ç›®æ¨™ æ•…äº‹é–‹å§‹ é‡åˆ°ç“¶é ¸ é¸æ–°çš„å€™é¸äºº å•é¡Œ éœ€æ±‚ Data Modeling Bucket Dark Launch Trade-off Performance å‡ºå¤§äº‹æ‹‰ The Future Near Term Long Term çµèª å¿ƒå¾— å‰è¨€ é€™ç¯‡éƒ¨è½æ ¼æœƒç¿»è­¯å’Œåƒè€ƒ &amp;lt;How Discord Stores Billions of Messages&amp;gt; é€™ç¯‡éƒ¨è½æ ¼çš„å…§å®¹åšæ•´ç†å’Œç¿»è­¯ã€‚
æˆ‘å€‹äººä¸€å‘å–œæ­¡ç ”ç©¶è‡ªå·±å–œæ­¡ç”¨çš„è»Ÿé«”ï¼Œèº«ç‚ºæ¯å¤©éƒ½æœƒä¸Š DC å’Œæœ‹å‹ç¤¾äº¤çš„æˆ‘ä¾†èªªï¼Œç ”ç©¶ä¸€ä¸‹é€™éº¼å²å®³çš„æœå‹™ï¼Œä¹Ÿæ˜¯æˆ‘çš„èˆˆè¶£ä¹‹æ‰€åœ¨ã€‚
ç›®æ¨™ é€™ç¯‡æ–‡ç« çš„ç›®æ¨™ä¹Ÿå¾ˆæ˜ç¢ºï¼ŒDiscord æ¯å¤©æœƒéœ€è¦è™•ç†ä¸€å„„çš„è¨Šæ¯ (100 million/day)ï¼Œé€™ç¯‡æ–‡ç« æœƒè§£é‡‹ä»–å€‘æ€éº¼åšåˆ°çš„ã€‚
æ•…äº‹é–‹å§‹ ç¾…é¦¬ä¸æ˜¯ä¸€å¤©é€ æˆçš„ï¼ŒDiscord åœ¨ 2015 å¹´åªèŠ±äº†å…©å€‹æœˆå°±å»ºç«‹å¥½äº†ç¬¬ä¸€ç‰ˆã€‚ç•¶æ™‚ä»–å€‘åªç”¨äº†ä¸€å° MongoDB ç•¶ä½œä¸»è¦ Databaseï¼Œä½œè€… (Discord CTO) ä¹Ÿç›´æ¥è¬›æ˜äº†ï¼Œç•¶æ™‚é¸ç”¨ MongoDB ç´”ç²¹åªæ˜¯ç‚ºäº†å¿«é€Ÿç–Šä»£ç”¢å“ï¼Œä»¥æœ€å¿«çš„é€Ÿåº¦å»æ‰“é€ å¸‚å ´æƒ³è¦çš„æ±è¥¿ã€‚å¾ä¸€é–‹å§‹å°±ä¸æ‰“ç®—ç”¨ Sharding çš„ MongoDBï¼Œä¸åƒ…è¤‡é›œé›£ç”¨è€Œä¸”é‚„ä¸ç©©å®šã€‚æ‰€ä»¥ä¸€é–‹å§‹ä½¿è¨­è¨ˆä¸Šå°±çµ¦å‡ºå¾ˆå¤§çš„ç§»æ¤ç‰¹æ€§ã€‚(MongoDB QQ)
åœ¨æ­¤ä¹‹ä¸Šï¼Œä½œè€…æå‡º Discord çš„æ ¸å¿ƒæ–‡åŒ–â€¦
Build quickly to prove out a product feature, but always with a path to a more robust solution</description></item><item><title>&lt;Life beyond Distributed Transactions: an Apostateâ€™s Opinion> ç¢©è«–ç­†è¨˜</title><link>https://tachunwu.github.io/posts/ms-tcc/</link><pubDate>Wed, 28 Dec 2022 19:12:03 +0800</pubDate><guid>https://tachunwu.github.io/posts/ms-tcc/</guid><description>Index Abstract å‡è¨­ Layers of the Appilication &amp;amp; Scale-aware Transactional Scopes ç”¨è©å®šç¾© Entities Atmoic Transactions Messages Activities Distributed Transaction Remembering Messages as State Tentative/Cancel/Confirm å€‹äººæ€è€ƒ Abstract æ¢è¨ Scale Appilication çš„èªè¨€å­¸
å‡è¨­ Layers of the Appilication &amp;amp; Scale-aware ä¸Šå±¤ä¸ç”¨è€ƒæ…® Scale ä¸‹å±¤éœ€è¦å¯¦ä½œ Scale-aware Transactional Scopes æœ¬æ–‡èšç„¦åœ¨è¨è«– Transaction åœ¨ç‰¹å®šé›†åˆå…§çš„ Serializabilityï¼Œæˆ‘å€‘åªè¦æ±‚åœ¨ç‰¹å®šçš„æ©Ÿå™¨å…§éƒ¨ç¶­æŒéš”é›¢æ€§ï¼Œè€Œä¸æ˜¯æ•´å€‹ Data Center å¼·åˆ¶ç¶­æŒä¸€è‡´ã€‚
ç”¨è©å®šç¾© Entities æœ¬æ–‡å®šç¾© Entity å¿…é ˆæ“æœ‰ä¸€å€‹ ID æˆ–æ˜¯ Keyï¼Œè€Œä¸”åœ¨ Entity ä¹‹å…§å¿…é ˆæ“æœ‰å”¯ä¸€çš„ Serializabilityã€‚
Atmoic Transactions Atmoic Transaction ä¸å¯ä»¥æ¶µè“‹å¤šæ•¸çš„ Entityã€‚(é€™é‚Šå’Œ Database çš„å®šç¾©å°±ä¸å¤ªä¸€æ¨£äº†ï¼Œé€™è£¡æ›´åƒæ˜¯æ‡‰ç”¨ç¨‹å¼çš„è§’åº¦)</description></item><item><title>&lt;The Art of Notion></title><link>https://tachunwu.github.io/posts/the-art-of-notion/</link><pubDate>Sun, 25 Dec 2022 20:22:36 +0800</pubDate><guid>https://tachunwu.github.io/posts/the-art-of-notion/</guid><description>Index ç°¡ä»‹ Notion æ˜¯å•¥ï¼Ÿ Blocks Dynamic Change Render Tree Indentation Permissions Life of a block Creating and updating Real-time updates Reading blocks Sharding è¦ Sharding ä»€éº¼ Dataï¼Ÿ è¦æ€éº¼ Partitionï¼Ÿ å¯¦éš›ä¸Šè¦å»ºç«‹å¤šå°‘å€‹ Shardï¼Œç„¶å¾Œæˆ‘å€‘è¦æ€éº¼ç®¡ç†ï¼Ÿ Decision 1ï¼šä»¥ block ç‚ºä¸­å¿ƒ Sharding Decision 2ï¼šç”¨ workspace ID ä¾† partition Decision 3ï¼šèƒ½åŠ›ç¶œåˆè©•ä¼° Migrating ç°¡ä»‹ é€™ç¯‡æ–‡ç« æœƒçµ±æ•´ Notion å…©ç¯‡éå¸¸é‡è¦çš„å·¥ç¨‹éƒ¨è½æ ¼ï¼Œåˆ†åˆ¥æ˜¯ å’Œ ï¼Œå…¶ç°¡å–®æ‰¼è¦åœ°è¬›è¿°äº† Notion èƒŒå¾Œçš„å·¥ç¨‹è¨­è¨ˆï¼Œæˆ‘ä¸€å‘å–œæ­¡ç ”ç©¶è‡ªå·±è¦ºå¾—å¾ˆå¥½ç”¨çš„å·¥å…·æ€éº¼è¨­è¨ˆçš„ï¼Œå°±è®“æˆ‘å€‘ä¾†çœ‹çœ‹å§ã€‚
Notion æ˜¯å•¥ï¼Ÿ å°æ–¼ä¸çŸ¥é“ Notion çš„äººæˆ‘æƒ³é‚„æ˜¯æœ‰çš„ (å¦‚æœä½ æ˜¯é€™ç¨®äººï¼Œæˆ‘è¦ç‰¹åˆ¥è¬è¬ä½ ã„Ÿå“ˆå“ˆï¼Œå› ç‚ºä½ æ‡‰è©²æ˜¯çœ‹åˆ°æ˜¯æˆ‘å¯«çš„æ‰é»é€²ä¾† XD)ã€‚å®ƒå¯ä»¥èªªæ˜¯ä¸€æ¬¾åŠŸèƒ½éå¸¸å¼·å¤§çš„ç·šä¸Šç­†è¨˜è»Ÿé«”(ç”šè‡³å¯ä»¥èªªæ˜¯è³‡æ–™åº«)ï¼Œæˆ‘æœƒç”¨ä¾†æ•´ç†å¹¾ä¹æ‰€æœ‰æˆ‘ç›®å‰åœ¨ç ”ç©¶çš„æ±è¥¿ã€‚
ç”šè‡³æˆ‘å¯«é€™ç¯‡éƒ¨è½æ ¼çš„è‰ç¨¿ä¹Ÿæ˜¯åœ¨ Notion ä¸Šè€Œä¸æ˜¯ VScodeã€‚(é›–ç„¶æˆ‘æ²’æ”¶ Notion éŒ¢ï¼Œä½†æ˜¯ Notion çœŸçš„æ˜¯å€‹å¥½è»Ÿé«”) Blocks é€™é‚Šå»ºè­°å¯ä»¥å…ˆå»å‰µå€‹ Notion å¸³è™Ÿï¼Œç„¶å¾Œé‚Šç©ç©çœ‹é‚Šæ­é…æˆ‘çš„æ–‡ç« æœç”¨ã€‚æ‡‰è©²ä¸é›£ç™¼ç¾ Notion ä½¿ç”¨èµ·ä¾†å¾ˆç›´è¦ºï¼Œä½ å¯ä»¥æŠŠè³‡è¨Šå¡Šæ‹‰ä¾†æ‹‰å»ã€é‡æ–°çµ„åˆã€‚é€™äº›è³‡è¨Šå°ç¢ç‰‡ï¼Œåœ¨ Notion è£¡é¢ç¨±ä½œ Blockï¼Œæ¯ä¸€å€‹å°ç¢ç‰‡éƒ½æœ‰ä»¥ä¸‹äº”å€‹å±¬æ€§ã€‚</description></item></channel></rss>